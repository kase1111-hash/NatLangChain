{{- if not .Values.existingSecrets.appSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "natlangchain.appSecretName" . }}
  labels:
    {{- include "natlangchain.labels" . | nindent 4 }}
type: Opaque
data:
  SECRET_KEY: {{ .Values.config.secretKey | default (include "natlangchain.generateSecretKey" .) | b64enc | quote }}
  JWT_SECRET_KEY: {{ .Values.config.jwtSecretKey | default (include "natlangchain.generateSecretKey" .) | b64enc | quote }}
{{- end }}
---
{{- if and .Values.redis.external.enabled (not .Values.redis.external.existingSecret) }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ printf "%s-redis-external" (include "natlangchain.fullname" .) }}
  labels:
    {{- include "natlangchain.labels" . | nindent 4 }}
type: Opaque
data:
  redis-password: {{ .Values.redis.external.password | b64enc | quote }}
{{- end }}
---
{{- if and .Values.postgresql.external.enabled (not .Values.postgresql.external.existingSecret) }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ printf "%s-postgresql-external" (include "natlangchain.fullname" .) }}
  labels:
    {{- include "natlangchain.labels" . | nindent 4 }}
type: Opaque
data:
  postgresql-password: {{ .Values.postgresql.external.password | b64enc | quote }}
{{- end }}
